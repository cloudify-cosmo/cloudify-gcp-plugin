tosca_definitions_version: cloudify_dsl_1_3

imports:
  - http://cloudify.co/spec/cloudify/4.5/types.yaml
  - plugin:cloudify-gcp-plugin

inputs:

  zone:
    type: string
    default: { get_secret: zone }

  refresh_token:
    type: string
    default: 'refresh_token'

dsl_definitions:

  client_config: &gcp_config
    auth: { get_secret: gcp_credentials }
    refresh_token: { get_input: refresh_token }
    zone: { get_input: zone }

node_templates:

  project:
    type: cloudify.gcp.project
    properties:
      gcp_config: *gcp_config
